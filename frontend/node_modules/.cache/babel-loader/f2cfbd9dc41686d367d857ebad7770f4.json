{"ast":null,"code":"import _defineProperty from \"/home/tiago/Documentos/SivOnline-github/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"/home/tiago/Documentos/SivOnline-github/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"/home/tiago/Documentos/SivOnline-github/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/home/tiago/Documentos/SivOnline-github/frontend/src/pages/login/index.tsx\";\n\nimport React, { useState } from 'react';\nimport api from '../../services/api';\nimport { useHistory } from 'react-router-dom';\nimport { Div } from './styles';\nimport logo from '../../assets/logo.png';\n\nvar Index = function Index() {\n  var history = useHistory();\n\n  var _useState = useState({\n    email: '',\n    password: ''\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      data = _useState2[0],\n      setData = _useState2[1];\n\n  function login(event) {\n    event.preventDefault();\n    api.post('/auth', {\n      email: data.email,\n      password: data.password\n    }).then(function (res) {\n      console.log(res.data.token.token);\n      localStorage.setItem('token', res.data.token.token);\n      api.defaults.headers.common['Authorization'] = \"Bearer \".concat(localStorage.getItem('token'));\n      api.get('getUserInfo', {\n        headers: {\n          Authorization: \"Bearer \".concat(res.data.token.token)\n        }\n      }).then(function (res) {\n        localStorage.setItem('representation', res.data.representation);\n\n        if (res.data.representation_type === 'Mesa') {\n          history.push('/Moderator');\n        } else {\n          if (res.data.representation_type === 'Delegado') {\n            history.push('/Delegate');\n          } else {}\n        }\n      });\n    })[\"catch\"](function (err) {\n      return console.log(err);\n    });\n  }\n\n  function handleInputChange(event) {\n    var _event$target = event.target,\n        name = _event$target.name,\n        value = _event$target.value;\n    setData(_objectSpread(_objectSpread({}, data), {}, _defineProperty({}, name, value)));\n  }\n\n  return /*#__PURE__*/React.createElement(Div, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: logo,\n    alt: \"\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"section\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: login,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"email\",\n    name: \"email\",\n    placeholder: \"exemplo@alunoviva.com.br\",\n    onChange: handleInputChange,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"password\",\n    name: \"password\",\n    placeholder: \"senha\",\n    onChange: handleInputChange,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 9\n    }\n  }, \"Entrar\")))));\n};\n\nexport default Index;","map":{"version":3,"sources":["/home/tiago/Documentos/SivOnline-github/frontend/src/pages/login/index.tsx"],"names":["React","useState","api","useHistory","Div","logo","Index","history","email","password","data","setData","login","event","preventDefault","post","then","res","console","log","token","localStorage","setItem","defaults","headers","common","getItem","get","Authorization","representation","representation_type","push","err","handleInputChange","target","name","value"],"mappings":";;;;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAuD,OAAvD;AACA,OAAOC,GAAP,MAAgB,oBAAhB;AACA,SAAQC,UAAR,QAAyB,kBAAzB;AACA,SAAQC,GAAR,QAAkB,UAAlB;AACA,OAAOC,IAAP,MAAiB,uBAAjB;;AAEA,IAAMC,KAAe,GAAG,SAAlBA,KAAkB,GAAM;AAC5B,MAAMC,OAAO,GAAGJ,UAAU,EAA1B;;AAD4B,kBAEJF,QAAQ,CAAC;AAACO,IAAAA,KAAK,EAAE,EAAR;AAAYC,IAAAA,QAAQ,EAAE;AAAtB,GAAD,CAFJ;AAAA;AAAA,MAErBC,IAFqB;AAAA,MAEfC,OAFe;;AAG5B,WAASC,KAAT,CAAeC,KAAf,EAAgC;AAC9BA,IAAAA,KAAK,CAACC,cAAN;AACAZ,IAAAA,GAAG,CAACa,IAAJ,CAAS,OAAT,EAAiB;AACbP,MAAAA,KAAK,EAACE,IAAI,CAACF,KADE;AAEbC,MAAAA,QAAQ,EAACC,IAAI,CAACD;AAFD,KAAjB,EAGGO,IAHH,CAGQ,UAAAC,GAAG,EAAE;AACXC,MAAAA,OAAO,CAACC,GAAR,CAAYF,GAAG,CAACP,IAAJ,CAASU,KAAT,CAAeA,KAA3B;AAEAC,MAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BL,GAAG,CAACP,IAAJ,CAASU,KAAT,CAAeA,KAA7C;AACAlB,MAAAA,GAAG,CAACqB,QAAJ,CAAaC,OAAb,CAAqBC,MAArB,CAA4B,eAA5B,qBAAyDJ,YAAY,CAACK,OAAb,CAAqB,OAArB,CAAzD;AACAxB,MAAAA,GAAG,CAACyB,GAAJ,CAAQ,aAAR,EAAuB;AAACH,QAAAA,OAAO,EAAE;AAACI,UAAAA,aAAa,mBAAaX,GAAG,CAACP,IAAJ,CAASU,KAAT,CAAeA,KAA5B;AAAd;AAAV,OAAvB,EAAsFJ,IAAtF,CAA2F,UAAAC,GAAG,EAAE;AAChGI,QAAAA,YAAY,CAACC,OAAb,CAAqB,gBAArB,EAAuCL,GAAG,CAACP,IAAJ,CAASmB,cAAhD;;AAEE,YAAGZ,GAAG,CAACP,IAAJ,CAASoB,mBAAT,KAAiC,MAApC,EAA2C;AACzCvB,UAAAA,OAAO,CAACwB,IAAR,CAAa,YAAb;AACD,SAFD,MAEK;AACH,cAAGd,GAAG,CAACP,IAAJ,CAASoB,mBAAT,KAAiC,UAApC,EAA+C;AAC7CvB,YAAAA,OAAO,CAACwB,IAAR,CAAa,WAAb;AAED,WAHD,MAGK,CAEJ;AACF;AAEF,OAdD;AAgBD,KAxBD,WAwBS,UAAAC,GAAG;AAAA,aAAEd,OAAO,CAACC,GAAR,CAAYa,GAAZ,CAAF;AAAA,KAxBZ;AAyBD;;AACD,WAASC,iBAAT,CAA2BpB,KAA3B,EAAgE;AAAA,wBACxCA,KAAK,CAACqB,MADkC;AAAA,QACvDC,IADuD,iBACvDA,IADuD;AAAA,QACjDC,KADiD,iBACjDA,KADiD;AAG9DzB,IAAAA,OAAO,iCAAKD,IAAL,2BAAYyB,IAAZ,EAAmBC,KAAnB,GAAP;AACD;;AACD,sBACE,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,GAAG,EAAE/B,IAAV;AAAgB,IAAA,GAAG,EAAC,EAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAM,IAAA,QAAQ,EAAEO,KAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACA;AAAO,IAAA,IAAI,EAAC,OAAZ;AAAoB,IAAA,IAAI,EAAC,OAAzB;AAAiC,IAAA,WAAW,EAAC,0BAA7C;AAAyE,IAAA,QAAQ,EAAEqB,iBAAnF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADA,eAEA;AAAO,IAAA,IAAI,EAAC,UAAZ;AAAuB,IAAA,IAAI,EAAC,UAA5B;AAAuC,IAAA,WAAW,EAAC,OAAnD;AAA2D,IAAA,QAAQ,EAAEA,iBAArE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFA,eAGA;AAAQ,IAAA,IAAI,EAAC,QAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAHA,CADF,CAFA,CAFF,CADF;AAgBD,CApDD;;AAqDA,eAAe3B,KAAf","sourcesContent":["import React, { useState, ChangeEvent, FormEvent} from 'react'\nimport api from '../../services/api'\nimport {useHistory} from 'react-router-dom'\nimport {Div} from './styles'\nimport logo from '../../assets/logo.png'\n\nconst Index: React.FC = () => {\n  const history = useHistory()\n  const [data, setData] = useState({email: '', password: ''})\n  function login(event: FormEvent){\n    event.preventDefault()\n    api.post('/auth',{\n        email:data.email,\n        password:data.password\n    }).then(res=>{\n      console.log(res.data.token.token)\n\n      localStorage.setItem('token', res.data.token.token)\n      api.defaults.headers.common['Authorization'] = `Bearer ${localStorage.getItem('token')}`\n      api.get('getUserInfo', {headers: {Authorization : `Bearer ${res.data.token.token}`}}).then(res=>{\n      localStorage.setItem('representation', res.data.representation)\n\n        if(res.data.representation_type === 'Mesa'){\n          history.push('/Moderator')\n        }else{\n          if(res.data.representation_type === 'Delegado'){\n            history.push('/Delegate')\n\n          }else{\n            \n          }\n        }\n\n      })\n\n    }).catch(err=>console.log(err))\n  }\n  function handleInputChange(event: ChangeEvent<HTMLInputElement>){\n    const {name, value} = event.target\n    \n    setData({...data, [name]: value})\n  }\n  return (\n    <Div>\n\n      <div>\n        <img src={logo} alt=\"\"/>\n      <section>\n        <form onSubmit={login}>\n        <input type=\"email\" name=\"email\" placeholder=\"exemplo@alunoviva.com.br\"  onChange={handleInputChange}/>\n        <input type=\"password\" name=\"password\" placeholder=\"senha\" onChange={handleInputChange}/>\n        <button type=\"submit\">Entrar</button>\n        </form>\n     \n      </section>\n      </div>\n    </Div>\n  )\n}\nexport default Index"]},"metadata":{},"sourceType":"module"}