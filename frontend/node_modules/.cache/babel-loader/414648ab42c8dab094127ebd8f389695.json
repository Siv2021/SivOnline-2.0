{"ast":null,"code":"import _slicedToArray from \"/home/tiago/Documentos/SivOnline-github/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/home/tiago/Documentos/SivOnline-github/frontend/src/components/speechesList/index.tsx\";\n\nimport React, { useState, useEffect } from 'react';\nimport Styles from './styles';\nimport io from 'socket.io-client';\nvar user = localStorage.getItem('representation') || '';\nvar socket = io('http://localhost:3001');\n\nvar SpeechesList = function SpeechesList(_ref) {\n  var moderator = _ref.moderator;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      delegations = _useState2[0],\n      setDelegations = _useState2[1];\n\n  var _useState3 = useState('visible'),\n      _useState4 = _slicedToArray(_useState3, 2),\n      buttonState = _useState4[0],\n      setButtonState = _useState4[1];\n\n  var timeOfSpeech = 2;\n  useEffect(function () {\n    if (delegations.map(function (i) {\n      return i.name;\n    }).indexOf(user) !== -1) {\n      setButtonState('unvisible');\n    } else {\n      setButtonState('visible');\n    }\n  }, [delegations]);\n  socket.on('setSpeechesList', function (list) {\n    var List = list.map(function (i) {\n      return {\n        position: list.indexOf(i) + 1,\n        flag: 'icon',\n        name: i\n      };\n    });\n    setDelegations(List);\n  });\n\n  function handleSpeechList() {\n    socket.emit('newSubscribe', user);\n  }\n\n  function removeDelegation() {\n    socket.emit('removeSubscribe');\n  }\n\n  if (!delegations[0] && moderator === true) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 3\n      }\n    }, \"N\\xE3o h\\xE1 inscri\\xE7\\xF5es\");\n  }\n\n  return /*#__PURE__*/React.createElement(Styles, {\n    className: \"components\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"titulo\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 9\n    }\n  }, \"Lista de Discursos\"), /*#__PURE__*/React.createElement(\"ul\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 7\n    }\n  }, delegations.map(function (delegation) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"box\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"li\", {\n      key: delegation.position,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 13\n      }\n    }, delegation.name, \" -\", \" \".concat(delegation.position * timeOfSpeech, \" minutos\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"separator\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 13\n      }\n    }));\n  })), moderator ? /*#__PURE__*/React.createElement(\"button\", {\n    onClick: removeDelegation,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 19\n    }\n  }, \"Remover \".concat(delegations[0].name, \" da lista\")) : /*#__PURE__*/React.createElement(\"button\", {\n    id: buttonState,\n    onClick: handleSpeechList,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 109\n    }\n  }, \"Inscreva-se na lista\"));\n};\n\nexport default SpeechesList;","map":{"version":3,"sources":["/home/tiago/Documentos/SivOnline-github/frontend/src/components/speechesList/index.tsx"],"names":["React","useState","useEffect","Styles","io","user","localStorage","getItem","socket","SpeechesList","moderator","delegations","setDelegations","buttonState","setButtonState","timeOfSpeech","map","i","name","indexOf","on","list","List","position","flag","handleSpeechList","emit","removeDelegation","delegation"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react';\r\nimport Styles from './styles'\r\nimport io from 'socket.io-client'\r\n\r\ninterface Props{\r\n  moderator?: boolean\r\n}\r\ninterface Speech{\r\n  position: number,\r\n  flag: string,\r\n  name: string\r\n}\r\nconst user : string = localStorage.getItem('representation') || ''\r\nconst socket = io('http://localhost:3001')\r\nconst SpeechesList: React.FC<Props> = ({moderator}) => {\r\n  const [delegations, setDelegations] = useState<Speech[]>([\r\n  ])\r\n  const [buttonState, setButtonState] = useState('visible')\r\n  const timeOfSpeech = 2\r\n  \r\n\r\n  useEffect(() => {\r\n    if(delegations.map(i=>i.name).indexOf(user)!==-1){\r\n      setButtonState('unvisible')\r\n    }else{\r\n      setButtonState('visible')\r\n    }\r\n  }, [delegations])\r\n  socket.on('setSpeechesList', (list : string[])=>{\r\n      const List = list.map(i=>({position: list.indexOf(i)+1, flag: 'icon', name: i}))\r\n      setDelegations(List)\r\n  })\r\n  function handleSpeechList(){\r\n    socket.emit('newSubscribe', user)\r\n  }\r\n  function removeDelegation(){\r\n    socket.emit('removeSubscribe')\r\n  }\r\n if(!delegations[0] && moderator === true){\r\nreturn(\r\n  <div>Não há inscrições</div>\r\n)\r\n }\r\n  return(\r\n    <Styles className=\"components\">\r\n        <div className=\"titulo\">Lista de Discursos</div>\r\n      <ul>\r\n        {delegations.map(delegation=>(\r\n          <div className=\"box\">\r\n            <li key={delegation.position}>{delegation.name} -{` ${delegation.position * timeOfSpeech} minutos`}</li>\r\n            <div className=\"separator\"></div>\r\n\r\n          </div>\r\n        ))}\r\n       \r\n      </ul>\r\n     {moderator ? <button onClick={removeDelegation}>{`Remover ${delegations[0].name} da lista`}</button> : <button id={buttonState} onClick={handleSpeechList}>Inscreva-se na lista</button>}\r\n      \r\n      \r\n\r\n    </Styles>\r\n  );\r\n}\r\n\r\nexport default SpeechesList;"]},"metadata":{},"sourceType":"module"}