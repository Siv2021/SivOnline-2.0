{"ast":null,"code":"import _regeneratorRuntime from \"/home/tiago/Documentos/SivOnline-github/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/tiago/Documentos/SivOnline-github/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/home/tiago/Documentos/SivOnline-github/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/home/tiago/Documentos/SivOnline-github/frontend/src/components/video/Jitsi.tsx\";\n\nimport React, { useState } from 'react';\n\nvar Jitsi = function Jitsi(_ref) {\n  var moderator = _ref.moderator,\n      roomName = _ref.roomName,\n      password = _ref.password,\n      user = _ref.user;\n  var jitsiContainerId = \"jitsi-container-id\";\n\n  var _useState = useState({}),\n      _useState2 = _slicedToArray(_useState, 2),\n      jitsi = _useState2[0],\n      setJitsi = _useState2[1];\n\n  var loadJitsiScript = function loadJitsiScript() {\n    var resolveLoadJitsiScriptPromise = null;\n    var loadJitsiScriptPromise = new Promise(function (resolve) {\n      resolveLoadJitsiScriptPromise = resolve;\n    });\n    var script = document.createElement(\"script\");\n    script.src = \"https://meet.jit.si/external_api.js\";\n    script.async = true;\n    script.onload = resolveLoadJitsiScriptPromise;\n    document.body.appendChild(script);\n    return loadJitsiScriptPromise;\n  };\n\n  var initialiseJitsi = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var _jitsi, get, _get;\n\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _get = function _get3() {\n                _get = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n                  var info;\n                  return _regeneratorRuntime.wrap(function _callee$(_context) {\n                    while (1) {\n                      switch (_context.prev = _context.next) {\n                        case 0:\n                          if (!(jitsi.executeCommand && jitsi.getParticipantsInfo)) {\n                            _context.next = 5;\n                            break;\n                          }\n\n                          _context.next = 3;\n                          return jitsi.getParticipantsInfo();\n\n                        case 3:\n                          info = _context.sent;\n                          console.log(info);\n\n                        case 5:\n                        case \"end\":\n                          return _context.stop();\n                      }\n                    }\n                  }, _callee);\n                }));\n                return _get.apply(this, arguments);\n              };\n\n              get = function _get2() {\n                return _get.apply(this, arguments);\n              };\n\n              if (window.JitsiMeetExternalAPI) {\n                _context2.next = 5;\n                break;\n              }\n\n              _context2.next = 5;\n              return loadJitsiScript();\n\n            case 5:\n              _jitsi = new window.JitsiMeetExternalAPI(\"meet.jit.si\", {\n                roomName: roomName,\n                parentNode: document.getElementById(jitsiContainerId),\n                userInfo: {\n                  displayName: user\n                },\n                configOverwrite: {\n                  startWithAudioMuted: true\n                },\n                interfaceConfigOverwrite: {\n                  TOOLBAR_BUTTONS: ['microphone', 'camera']\n                }\n              });\n              setJitsi(_jitsi);\n\n            case 7:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function initialiseJitsi() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  React.useEffect(function () {\n    initialiseJitsi();\n    return function () {\n      var _jitsi$dispose;\n\n      return jitsi === null || jitsi === void 0 ? void 0 : (_jitsi$dispose = jitsi.dispose) === null || _jitsi$dispose === void 0 ? void 0 : _jitsi$dispose.call(jitsi);\n    };\n  }, []);\n\n  if (jitsi.executeCommand && jitsi.getParticipantsInfo) {\n    jitsi.executeCommand(\"\");\n  }\n\n  function get() {\n    return _get4.apply(this, arguments);\n  }\n\n  function _get4() {\n    _get4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n      var info;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              if (!(jitsi.executeCommand && jitsi.getParticipantsInfo)) {\n                _context3.next = 5;\n                break;\n              }\n\n              _context3.next = 3;\n              return jitsi.getParticipantsInfo();\n\n            case 3:\n              info = _context3.sent;\n              console.log(info);\n\n            case 5:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n    return _get4.apply(this, arguments);\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    id: jitsiContainerId,\n    style: {\n      height: 720,\n      width: \"100%\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 12\n    }\n  });\n};\n\nexport default Jitsi;","map":{"version":3,"sources":["/home/tiago/Documentos/SivOnline-github/frontend/src/components/video/Jitsi.tsx"],"names":["React","useState","Jitsi","moderator","roomName","password","user","jitsiContainerId","jitsi","setJitsi","loadJitsiScript","resolveLoadJitsiScriptPromise","loadJitsiScriptPromise","Promise","resolve","script","document","createElement","src","async","onload","body","appendChild","initialiseJitsi","get","executeCommand","getParticipantsInfo","info","console","log","window","JitsiMeetExternalAPI","_jitsi","parentNode","getElementById","userInfo","displayName","configOverwrite","startWithAudioMuted","interfaceConfigOverwrite","TOOLBAR_BUTTONS","useEffect","dispose","height","width"],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\n\ninterface Props{\n  moderator?: boolean,\n  roomName: string,\n  password: string\n  user: string,\n}\ninterface JitsiTypes{\n  dispose?: Function,\n  executeCommand?: Function\n  getParticipantsInfo?: Function\n}\ninterface ParticipantJoined{\n  id: string, \n  // displayName: string\n}\nconst Jitsi: React.FC<Props> = ({moderator, roomName, password, user}): React.ReactElement => {\n\n    const jitsiContainerId = \"jitsi-container-id\";\n    const [jitsi, setJitsi] = useState<JitsiTypes>({});\n    const loadJitsiScript = () => {\n      let resolveLoadJitsiScriptPromise = null;\n  \n      const loadJitsiScriptPromise = new Promise((resolve) => {\n        resolveLoadJitsiScriptPromise = resolve;\n      });\n  \n      const script = document.createElement(\"script\");\n      script.src = \"https://meet.jit.si/external_api.js\";\n      script.async = true;\n      script.onload = resolveLoadJitsiScriptPromise\n      document.body.appendChild(script);\n  \n      return loadJitsiScriptPromise;\n    };\n    const initialiseJitsi = async () => {\n      if (!window.JitsiMeetExternalAPI) {\n        await loadJitsiScript();\n      }\n  \n      const _jitsi = new window.JitsiMeetExternalAPI(\"meet.jit.si\", {\n        roomName,\n        parentNode: document.getElementById(jitsiContainerId),\n        userInfo: {displayName: user},\n        configOverwrite: { \n          startWithAudioMuted: true \n        },\n        interfaceConfigOverwrite: {\n          TOOLBAR_BUTTONS: [\n            'microphone', 'camera',\n            \n        ],\n        },\n      });\n  \n      setJitsi(_jitsi)\n      async function get(){\n        if(jitsi.executeCommand && jitsi.getParticipantsInfo){\n     \n           const info = await jitsi.getParticipantsInfo()\n        \n           console.log(info)\n        }\n         }\n    };\n  \n    React.useEffect(() => {\n      initialiseJitsi();\n  \n      return () => jitsi?.dispose?.();\n    }, []);\n\n   if(jitsi.executeCommand && jitsi.getParticipantsInfo){\n    jitsi.executeCommand(\"\")\n  \n\n   }\n   async function get(){\n    if(jitsi.executeCommand && jitsi.getParticipantsInfo){\n \n       const info = await jitsi.getParticipantsInfo()\n    \n       console.log(info)\n    }\n     }\n    return <div id={jitsiContainerId} style={{ height: 720, width: \"100%\" }} />;\n  };\n  \n  export default Jitsi;"]},"metadata":{},"sourceType":"module"}