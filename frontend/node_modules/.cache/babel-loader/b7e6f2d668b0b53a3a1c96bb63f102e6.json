{"ast":null,"code":"import _slicedToArray from \"/home/tiago/Documentos/SivOnline-github/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/home/tiago/Documentos/SivOnline-github/frontend/src/components/votes/index.tsx\";\n\nimport React, { useState, useEffect } from 'react';\nimport NewVote from './NewVote';\nimport Styles from './styles';\nimport io from 'socket.io-client';\nvar socket = io('http://localhost:3001');\n\nvar Votes = function Votes(_ref) {\n  var moderator = _ref.moderator;\n\n  var _useState = useState(),\n      _useState2 = _slicedToArray(_useState, 2),\n      lastVote = _useState2[0],\n      setLastVote = _useState2[1];\n\n  var _useState3 = useState({\n    title: '',\n    description: '',\n    link: ''\n  }),\n      _useState4 = _slicedToArray(_useState3, 2),\n      newVote = _useState4[0],\n      setNewVote = _useState4[1];\n\n  useEffect(function () {\n    socket.on('lastVote', function (lastVote) {\n      setLastVote(lastVote);\n    });\n  }, []);\n\n  function handleSubmit(event) {\n    var title = newVote.title,\n        description = newVote.description,\n        link = newVote.link;\n    socket.emit('newVote', {\n      title: title,\n      description: description,\n      link: link\n    });\n  }\n\n  socket.on('finishVote', function (lastVote) {\n    setLastVote(lastVote);\n    console.log(lastVote);\n  });\n\n  function handleTitle(event) {\n    var value = event.target.value;\n    setNewVote({\n      title: value,\n      description: newVote.description,\n      link: newVote.link\n    });\n  }\n\n  function handleDescription(event) {\n    var value = event.target.value;\n    setNewVote({\n      title: newVote.title,\n      description: value,\n      link: newVote.link\n    });\n  }\n\n  function handleLink(event) {\n    var value = event.target.value;\n    setNewVote({\n      title: newVote.title,\n      description: newVote.description,\n      link: value\n    });\n  }\n\n  if (moderator) {\n    return /*#__PURE__*/React.createElement(Styles, {\n      className: \"components\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: handleSubmit,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      onChange: handleTitle,\n      placeholder: \"T\\xEDtulo\",\n      type: \"text\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      onChange: handleDescription,\n      placeholder: \"descri\\xE7\\xE3o\",\n      type: \"text\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      onChange: handleLink,\n      placeholder: \"Link do documento\",\n      type: \"text\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 11\n      }\n    }, \"Enviar\")));\n  }\n\n  if (!lastVote) {\n    return /*#__PURE__*/React.createElement(Styles, {\n      className: \"components\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"LastVote\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 7\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"votes\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 7\n      }\n    }));\n  }\n\n  return /*#__PURE__*/React.createElement(Styles, {\n    className: \"components\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"LastVote\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 9\n    }\n  }, lastVote.title), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"votes\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    id: \"favorVotes\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 13\n    }\n  }, \"Votos a favor\"), /*#__PURE__*/React.createElement(\"ul\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 15\n    }\n  }, lastVote.favorables.map(function (vote) {\n    return /*#__PURE__*/React.createElement(\"li\", {\n      key: vote,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 17\n      }\n    }, vote);\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"againstVotes\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 13\n    }\n  }, \"Votos contra\"), /*#__PURE__*/React.createElement(\"ul\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 13\n    }\n  }, lastVote.againsts.map(function (vote) {\n    return /*#__PURE__*/React.createElement(\"li\", {\n      key: vote,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 15\n      }\n    }, vote);\n  })))), /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 11\n    }\n  }, \"Essa mo\\xE7\\xE3o \".concat(lastVote.decision, \" por \").concat(lastVote.favorables.length, \" votos a \").concat(lastVote.againsts.length)))));\n};\n\nexport default Votes;","map":{"version":3,"sources":["/home/tiago/Documentos/SivOnline-github/frontend/src/components/votes/index.tsx"],"names":["React","useState","useEffect","NewVote","Styles","io","socket","Votes","moderator","lastVote","setLastVote","title","description","link","newVote","setNewVote","on","handleSubmit","event","emit","console","log","handleTitle","value","target","handleDescription","handleLink","favorables","map","vote","againsts","decision","length"],"mappings":"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","sourcesContent":["import React, {useState, FormEvent, ChangeEvent, useEffect} from 'react';\r\nimport NewVote from './NewVote'\r\nimport Styles from './styles'\r\nimport io from 'socket.io-client'\r\n\r\nconst socket = io('http://localhost:3001')\r\n\r\ninterface Props{\r\n  moderator?: boolean\r\n}\r\ninterface LastVote{\r\n  title: string,\r\n  favorables: string[],\r\n  againsts: string[],\r\n  decision: string,\r\n}\r\ninterface NewVote{\r\n  title: string,\r\n  description: string,\r\n  link?: string\r\n}\r\nconst Votes: React.FC<Props> = ({moderator}) => {\r\n\r\n  const [lastVote, setLastVote] = useState<LastVote>()\r\n  \r\n  const [newVote, setNewVote] = useState<NewVote>({\r\n    title: '',\r\n    description: '',\r\n    link: ''\r\n  })\r\n  useEffect(()=>{\r\n    socket.on('lastVote', (lastVote : LastVote) =>{\r\n      setLastVote(lastVote)\r\n    })\r\n  },[])\r\n  function handleSubmit(event: FormEvent){\r\n    const {title, description, link} = newVote\r\n    socket.emit('newVote', {\r\n      title,\r\n      description,\r\n      link\r\n    })\r\n  }\r\n  socket.on('finishVote', (lastVote : LastVote) =>{\r\n    setLastVote(lastVote)\r\n    console.log(lastVote)\r\n\r\n  })\r\n  function handleTitle(event: ChangeEvent<HTMLInputElement>){\r\n    const {value} = event.target\r\n    setNewVote({title: value, description: newVote.description, link: newVote.link})\r\n  }\r\n  function handleDescription(event: ChangeEvent<HTMLInputElement>){\r\n    const {value} = event.target\r\n    setNewVote({title: newVote.title, description: value, link: newVote.link})\r\n  }\r\n  function handleLink(event: ChangeEvent<HTMLInputElement>){\r\n    const {value} = event.target\r\n    setNewVote({title: newVote.title, description: newVote.description, link: value})\r\n  }\r\n\r\n  if(moderator){\r\n    return (\r\n      <Styles className=\"components\">\r\n        <form onSubmit={handleSubmit}>\r\n          <input onChange={handleTitle} placeholder=\"Título\" type=\"text\"/>\r\n          <input onChange={handleDescription} placeholder=\"descrição\" type=\"text\"/>\r\n          <input onChange={handleLink} placeholder=\"Link do documento\"  type=\"text\"/>\r\n          <button type=\"submit\">Enviar</button>\r\n        </form>\r\n      </Styles>\r\n    )\r\n  }\r\n  if(!lastVote){\r\n    return(\r\n      <Styles className=\"components\">\r\n\r\n      <div className=\"LastVote\">\r\n       \r\n      </div>\r\n      <div className=\"votes\">\r\n\r\n</div>\r\n      </Styles>\r\n    )\r\n  }\r\n  return (\r\n    <Styles className=\"components\">\r\n     <div className=\"LastVote\">\r\n        <h1>{lastVote.title}</h1>\r\n        <div className=\"votes\">\r\n          <div id=\"favorVotes\">\r\n            <h2>Votos a favor</h2>\r\n              <ul>\r\n              {lastVote.favorables.map(vote=>(\r\n                <li key={vote}>{vote}</li>\r\n              ))}\r\n              </ul>\r\n          </div>\r\n          <div id=\"againstVotes\">\r\n            <h2>Votos contra</h2>\r\n            <ul>\r\n              {lastVote.againsts.map(vote=>(\r\n              <li key={vote}>{vote}</li>\r\n              ))}\r\n            </ul>\r\n          </div>\r\n        </div>\r\n        <div>\r\n          <h3>{`Essa moção ${lastVote.decision} por ${lastVote.favorables.length} votos a ${lastVote.againsts.length}`}</h3>\r\n        </div>\r\n      </div>\r\n    </Styles>\r\n  )\r\n}\r\n\r\nexport default Votes;"]},"metadata":{},"sourceType":"module"}