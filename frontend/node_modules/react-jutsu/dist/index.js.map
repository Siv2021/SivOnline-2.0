{"version":3,"file":"index.js","sources":["../src/useJitsi.js","../src/index.js"],"sourcesContent":["import { useState, useEffect } from 'react'\nimport PropTypes from 'prop-types'\n\nconst useJitsi = (options, domain = 'meet.jit.si') => {\n  const [jitsi, setJitsi] = useState(null)\n\n  useEffect(() => {\n    if (window.JitsiMeetExternalAPI) {\n      options.parentNode = document.getElementById(options.parentNode)\n      // eslint-disable-next-line no-undef\n      setJitsi(new JitsiMeetExternalAPI(domain, options))\n    } else {\n      setJitsi({ error: 'JitsiMeetExternalAPI is not available, check if https://meet.jit.si/external_api.js was loaded' })\n    }\n    return () => jitsi && jitsi.dispose()\n  }, [])\n\n  return jitsi\n}\n\nuseJitsi.propTypes = {\n  options: PropTypes.shape({\n    roomName: PropTypes.string.isRequired,\n    width: PropTypes.string,\n    height: PropTypes.string,\n    parentNode: PropTypes.string,\n    configOverwrite: PropTypes.string,\n    interfaceConfigOverwrite: PropTypes.object,\n    noSSL: PropTypes.bool,\n    jwt: PropTypes.string,\n    onload: PropTypes.func,\n    invitees: PropTypes.array,\n    devices: PropTypes.object,\n    userInfo: PropTypes.object\n  }),\n  domain: PropTypes.string\n}\n\nexport default useJitsi\n","import React, { useState, useEffect } from 'react'\nimport PropTypes from 'prop-types'\n\nimport useJitsi from './useJitsi'\n\nconst Jutsu = (props) => {\n  const { domain, roomName, displayName, password, jwt = null, subject } = props\n  const { loadingComponent, containerStyles, jitsiContainerStyles, onMeetingEnd } = props\n\n  const [loading, setLoading] = useState(true)\n  const jitsi = useJitsi({ roomName, parentNode: 'jitsi-container', jwt: jwt }, domain)\n\n  const containerStyle = {\n    width: '800px',\n    height: '400px'\n  }\n\n  const jitsiContainerStyle = {\n    display: loading ? 'none' : 'block',\n    width: '100%',\n    height: '100%'\n  }\n\n  useEffect(() => {\n    if (jitsi) {\n      setLoading(false)\n      jitsi.executeCommand('subject', subject)\n\n      jitsi.addEventListener('videoConferenceJoined', () => {\n        if (password) jitsi.executeCommand('password', password)\n        jitsi.executeCommand('displayName', displayName)\n      })\n\n      jitsi.addEventListener('passwordRequired', () => {\n        if (password) {\n          jitsi.executeCommand('password', password)\n        }\n      })\n      if (onMeetingEnd) jitsi.addEventListener('readyToClose', onMeetingEnd)\n    }\n\n    return () => jitsi && jitsi.dispose()\n  }, [jitsi])\n\n  return (\n    <div style={{ ...containerStyle, ...containerStyles }}>\n      {loading && (loadingComponent || <p>Loading ...</p>)}\n      <div\n        id='jitsi-container'\n        style={{ ...jitsiContainerStyle, ...jitsiContainerStyles }}\n      />\n    </div>\n  )\n}\n\nJutsu.propTypes = {\n  jwt: PropTypes.string,\n  domain: PropTypes.string,\n  subject: PropTypes.string,\n  password: PropTypes.string,\n  roomName: PropTypes.string.isRequired,\n  displayName: PropTypes.string,\n  onMeetingEnd: PropTypes.func,\n  loadingComponent: PropTypes.object,\n  containerStyles: PropTypes.object,\n  jitsiContainerStyles: PropTypes.object\n}\n\nexport { Jutsu, useJitsi }\n"],"names":["useJitsi","options","domain","useState","jitsi","setJitsi","window","JitsiMeetExternalAPI","parentNode","document","getElementById","error","dispose","propTypes","PropTypes","shape","string","isRequired","object","bool","func","array","Jutsu","props","roomName","displayName","password","jwt","subject","loadingComponent","containerStyles","jitsiContainerStyles","onMeetingEnd","loading","setLoading","containerStyle","jitsiContainerStyle","executeCommand","addEventListener","React"],"mappings":"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"}